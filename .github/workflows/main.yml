name: Criar branch develop para deploy

on:
  workflow_dispatch:

jobs:
  criar-branch:
    name: Criar nova branch
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v4.1.2

    - name: Checar branch de origem
      run: echo "A branch de origem é ${{ github.ref }}"

    - name: Configurar usuário push
      run: |
        git config --global user.email "hostmaster@precopratico.com.br"
        git config --global user.name "GitHub Actions"

    - name: Criar nova branch
      run: git checkout -b teste2 ${{ github.ref }}

    - name: Listar branches
      run: git branch -a

    - name: Commit e push da nova branch
      run: |
        git add .
        git commit -am "Nova branch a partir de ${{ github.ref }}"
        git push origin teste2
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}